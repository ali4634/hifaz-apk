<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Hifaz Tracker Backup</title>
  <script type="module">
    import { Filesystem, Directory, Encoding } from '@capacitor/filesystem';
    import { Share } from '@capacitor/share';

    async function saveBackup() {
      const data = JSON.stringify({
        student: "Ali",
        lesson: "Sabqi",
        date: new Date().toISOString()
      });

      try {
        await Filesystem.writeFile({
          path: "backup.json",
          data: data,
          directory: Directory.Documents,
          encoding: Encoding.UTF8,
        });
        alert("✅ Backup Saved Successfully!");
      } catch (e) {
        alert("❌ Error saving backup: " + e);
      }
    }

    async function shareBackup() {
      try {
        await Share.share({
          title: "Hifaz Tracker Backup",
          text: "Here is my backup file",
          url: "backup.json",
          dialogTitle: "Share Backup"
        });
      } catch (e) {
        alert("❌ Error sharing backup: " + e);
      }
    }

    window.saveBackup = saveBackup;
    window.shareBackup = shareBackup;
  </script>
</head>
<body>
  <h2>📘 Hifaz Tracker</h2>
  <button onclick="saveBackup()">💾 Save Backup</button>
  <button onclick="shareBackup()">📤 Share Backup</button>
</body>
</html>
